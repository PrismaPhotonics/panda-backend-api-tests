Test Name / ID,Path,What It Checks,Missing Spec / Decision Needed,Impact (Why It Matters),Linked Code (Ref)
test_p95_p99_latency_post_config (PZ-13770),tests/integration/performance/test_performance_high_priority.py:146-170,Measures P95/P99 for POST /config,Define P95/P99 thresholds + timeout + acceptable error rate,Cannot enforce performance regression gates without SLA,"src/utils/helpers.py (latency harness), API handlers for /config"
test_get_channels_endpoint_response_time (PZ-13419.1),tests/integration/api/test_api_endpoints_high_priority.py:135-147,Response time for GET /channels,Max response time SLA for endpoint,Arbitrary 1000ms today; could be too strict/lenient,FastAPI route for /channels
test_mongodb_scale_down_outage_returns_503,tests/integration/performance/test_mongodb_outage_resilience.py,"Behavior under MongoDB outage (status, recovery time)","Expected HTTP code (e.g., 503), max recovery time, caching policy","Outage handling unclear → flaky triage, undefined UX","DB client layer, error handlers"
test_concurrent_task_max_limit,tests/integration/performance/test_concurrency_limits.py,System behavior under N concurrent tasks,Define max concurrent tasks and on-exceed behavior,Unknown capacity → risk of overload or false failures,Task orchestrator / queue config
test_waterfall_poll_200_until_data,tests/integration/api/test_waterfall_polling_behavior.py,Polling semantics when 200-no-data-yet,Max wait before alert/timeout (live vs historic) and backoff,Tests can hang or be flaky without a contract,poll_until helper; /waterfall handler
test_frequency_range_equal_min_max (PZ-13876.1),tests/integration/api/test_config_validation_high_priority.py:475-495,Edge case: frequency min==max,Define validity and expected status code/message,No assertion possible until contract defined,FrequencyRange model; validators
test_channel_range_equal_min_max (PZ-13876.2),tests/integration/api/test_config_validation_high_priority.py:506-520,Edge case: channel min==max,Define validity (SingleChannel?) and expected behavior,Cannot assert success/failure deterministically,Channel range validation; config schema
test_config_with_invalid_sensor_range,tests/integration/api/test_config_validation_boundaries.py,Validate ROI sensor min/max against system constraints,Define min/max ROI size (count) + total_sensors rules,No guardrails → either false rejects or unsafe accepts,validators.validate_sensor_range; settings.yaml constraints
test_nfft_values_enforcement,tests/integration/api/test_signal_params_validation.py,Accept only valid NFFT values,Enforce allowed list (powers of 2) and max bound,Invalid NFFT harms performance/memory characteristics,validators.validate_nfft_value; settings.yaml:nfft.valid_values
test_error_schema_consistency,tests/integration/api/test_error_schema_contract.py,Standard error response mapping,Define API error schema (code/message/detail/hint),Parsing brittle; automation must normalize errors,Global exception handlers; Pydantic/FastAPI responses
validate_roi_change_safety (function),src/utils/validators.py:390-460,Validates ROI changes are not too drastic,"Confirm max_change_percent (currently 50%), cooldown period",6 tests depend on unconfirmed hardcoded value,Used by ROI adjustment tests
validate_nfft_value (function),src/utils/validators.py:194-227,Validates NFFT values,Enforce valid_values list or keep warning-only behavior,Code accepts any positive int; config has specific list,Used by configuration validation
FrequencyRange (model),src/models/focus_server_models.py:46-57,Pydantic model for frequency configuration,"Add absolute max/min frequency, minimum range span",Currently accepts any positive values including extremes,Used by all frequency-related tests
validate_sensor_range (function),src/utils/validators.py:116-151,Validates sensor range configuration,Define min/max ROI size (not just bounds),Could allow ROI with 1 sensor or all 2222 sensors,Used by sensor configuration tests
poll_until (helper),src/utils/helpers.py:474-504,Generic polling function,Define timeout/interval for live vs historic scenarios,"Hardcoded 60s timeout, 1s interval - might not fit all cases",Used throughout integration tests
generate_config_payload (helper),src/utils/helpers.py:507-532,Generates test configuration payloads,Align defaults with config/environments.yaml,Code defaults don't match config file defaults,Used by most integration tests

[pytest]
# Pytest Configuration
# ===================

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Ignore PZ repository tests (we only want to use PZ code, not run their tests)
norecursedirs = 
    .git
    .venv
    venv
    env
    __pycache__
    .pytest_cache
    *.egg-info
    external/pz

# Test paths
testpaths = tests

# Markers
markers =
    integration: Integration tests
    infrastructure: Infrastructure tests
    api: API tests
    unit: Unit tests
    resilience: Resilience tests
    performance: Performance tests
    mongodb_outage: MongoDB outage tests
    rabbitmq_outage: RabbitMQ outage tests
    rabbitmq: RabbitMQ tests
    slow: Slow running tests
    critical: Critical tests
    connectivity: Connectivity tests
    mongodb: MongoDB tests
    kubernetes: Kubernetes tests
    ssh: SSH tests
    summary: Summary tests
    pz: PZ development repository integration tests

# Logging - SHOW EVERYTHING IN CONSOLE
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# File logging
log_file = reports/logs/pytest_execution.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Coverage
addopts = 
    --strict-markers
    --tb=short
    -v
    -s


[pytest]
# Pytest Configuration
# ===================

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Ignore PZ repository tests (we only want to use PZ code, not run their tests)
norecursedirs = 
    .git
    .venv
    venv
    env
    __pycache__
    .pytest_cache
    *.egg-info
    external/pz

# Test paths
testpaths = tests

# Add project root to Python path
pythonpath = .

# Markers
markers =
    integration: Integration tests
    infrastructure: Infrastructure tests
    api: API tests
    unit: Unit tests
    ui: UI tests
    generated: Auto-generated tests
    ai_powered: AI-powered tests with self-healing
    planner: AI test planner tests
    generator: AI test generator tests
    healer: AI self-healing selector tests
    smart_actions: AI smart action tests
    full_workflow: Full AI workflow tests
    example: Example tests
    resilience: Resilience tests
    performance: Performance tests
    mongodb_outage: MongoDB outage tests
    rabbitmq_outage: RabbitMQ outage tests
    rabbitmq: RabbitMQ tests
    slow: Slow running tests
    critical: Critical tests
    connectivity: Connectivity tests
    mongodb: MongoDB tests
    kubernetes: Kubernetes tests
    ssh: SSH tests
    summary: Summary tests
    pz: PZ development repository integration tests
    data_quality: Data quality and integrity tests
    data_integrity: Data integrity validation tests
    schema: Schema validation tests
    soft_delete: Soft delete functionality tests
    data_lifecycle: Data lifecycle management and cleanup tests
    pZ_13598: PZ-13598 MongoDB data quality tests
    recovery: System recovery tests
    pZ_13604: PZ-13604 MongoDB recovery tests
    smoke: Smoke tests for critical functionality
    documents_current_behavior: Documents current server behavior (including bugs/missing validation)
    requirement: Documents correct behavior according to requirements/specs
    server_bug: Known server-side bug that needs fixing
    job_lifecycle: Kubernetes job lifecycle tests
    resources: Resource allocation tests
    networking: Networking and port exposure tests
    cleanup: Cleanup and resource deallocation tests
    observability: Observability and monitoring tests
    startup: System startup and initialization tests
    stability: System stability tests
    error_handling: Error handling and validation tests
    rollback: Rollback and recovery tests
    prelaunch: Pre-launch validation tests
    load: Load testing
    baseline: Baseline performance tests
    linear: Linear scaling tests
    soak: Soak/endurance tests
    capacity: Capacity testing
    stress: Stress testing
    xray: Xray test management integration marker
    jira: Jira bug ticket marker (links test to bug that it found)
    e2e: End-to-end tests
    historic: Historic playback tests
    live: Live monitoring tests
    view_type: View type validation tests
    latency: Latency and performance tests
    singlechannel: SingleChannel view tests
    validation: Validation tests
    health_check: Health check endpoint tests
    orchestration: Orchestration and job management tests
    grpc: gRPC stream and communication tests
    security: Security and malformed input handling tests
    negative: Negative test cases (invalid inputs, error scenarios)
    concurrent: Concurrent request and load tests
    edge_case: Edge case and boundary condition tests
    fuzzing: Fuzzing and security testing with malformed inputs
    ssl: SSL/TLS and security protocol tests
    calculations: System calculations and computation validation tests

# Logging - SHOW EVERYTHING IN CONSOLE
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# File logging - now handled by pytest_logging_plugin.py
# Creates timestamped logs in logs/test_runs/ directory
# Format: YYYY-MM-DD_HH-MM-SS_<test_type>.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Coverage
addopts = 
    --strict-markers
    --tb=short
    -v
    -s


[pytest]
# Pytest Configuration
# ===================

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Ignore PZ repository tests (we only want to use PZ code, not run their tests)
norecursedirs = 
    .git
    .venv
    venv
    env
    __pycache__
    .pytest_cache
    *.egg-info
    external/pz

# Test paths
testpaths = tests

# Add project root to Python path
pythonpath = .

# Markers
markers =
    integration: Integration tests
    infrastructure: Infrastructure tests
    api: API tests
    unit: Unit tests
    ui: UI tests
    generated: Auto-generated tests
    ai_powered: AI-powered tests with self-healing
    planner: AI test planner tests
    generator: AI test generator tests
    healer: AI self-healing selector tests
    smart_actions: AI smart action tests
    full_workflow: Full AI workflow tests
    example: Example tests
    resilience: Resilience tests
    performance: Performance tests
    mongodb_outage: MongoDB outage tests
    rabbitmq_outage: RabbitMQ outage tests
    rabbitmq: RabbitMQ tests
    slow: Slow running tests
    critical: Critical tests
    connectivity: Connectivity tests
    mongodb: MongoDB tests
    kubernetes: Kubernetes tests
    ssh: SSH tests
    summary: Summary tests
    pz: PZ development repository integration tests
    data_quality: Data quality and integrity tests
    data_integrity: Data integrity validation tests
    schema: Schema validation tests
    soft_delete: Soft delete functionality tests
    data_lifecycle: Data lifecycle management and cleanup tests
    pZ_13598: PZ-13598 MongoDB data quality tests
    recovery: System recovery tests
    pZ_13604: PZ-13604 MongoDB recovery tests

# Logging - SHOW EVERYTHING IN CONSOLE
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# File logging
log_file = reports/logs/pytest_execution.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Coverage
addopts = 
    --strict-markers
    --tb=short
    -v
    -s

